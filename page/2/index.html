<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>SnowFlavour's Blog - 此生无悔入OI，来世继续修电脑</title><meta name="author" content="Li Yuanzhuo"><meta name="copyright" content="Li Yuanzhuo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一个菜鸡&#x2F;蒟蒻">
<meta property="og:type" content="website">
<meta property="og:title" content="SnowFlavour&#39;s Blog">
<meta property="og:url" content="http://snowflavour.cn/page/2/index.html">
<meta property="og:site_name" content="SnowFlavour&#39;s Blog">
<meta property="og:description" content="一个菜鸡&#x2F;蒟蒻">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s21.ax1x.com/2024/08/01/pkXdhVS.md.png">
<meta property="article:author" content="Li Yuanzhuo">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s21.ax1x.com/2024/08/01/pkXdhVS.md.png"><script type="application/ld+json"></script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://snowflavour.cn/page/2/index.html"><link rel="preconnect" href="//unpkg.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://unpkg.com/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SnowFlavour\'s Blog',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'home'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/font.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous" referrerpolicy="no-referrer" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(https://s21.ax1x.com/2024/08/04/pkvFMkQ.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://s21.ax1x.com/2024/08/01/pkXdhVS.md.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">SnowFlavour's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="site-info"><h1 id="site-title">SnowFlavour's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts nc" id="recent-posts"><div class="recent-post-items"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-9-20-noip2018-preliminary-t7/" title="NOIP2018初赛T7">NOIP2018初赛T7</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-09-20T01:36:10.000Z" title="发表于 2025-09-20 09:36:10">2025-09-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-9-20-noip2018-preliminary-t7/#post-comment"><span class="waline-comment-count" data-path="/2025-9-20-noip2018-preliminary-t7/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">积分是不会的。 我们考虑有限的情况，即将一个线段均匀分成 n−1n - 1n−1 段，这样就会有 nnn 个点（包括两个端点）。 然后枚举线段的长度，取平均值就是期望了。（这里为了方便，我没有枚举实际长度，而是枚举了端点之间的线段数量，因此在分母位置还要多一个 n−1n - 1n−1） E(n)=2∑i=0n−1i(n−i)(n−1)n2E(n) = \frac{2\sum_{i=0}^{n - 1}i(n - i)}{(n - 1)n^2}E(n)=(n−1)n22∑i=0n−1​i(n−i)​ 分子可以展开： ∑i=0n−1i(n−i)=∑i=0n−1ni−i2=∑i=0n−1ni−∑i=0n−1i2=n2(n−1)2−n(n−1)(2n−1)6 \begin{aligned} \sum_{i=0}^{n - 1}i(n - i) &amp;= \sum_{i=0}^{n - 1}ni - i^2 \\ &amp;= \sum_{i=0}^{n - 1}ni - \sum_{i=0}^{n - 1}i^2 \\ &amp;= \frac{n^2(n - 1)}2 - \fra...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-8-29-segtree-merge/" title="线段树合并">线段树合并</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-08-29T07:25:11.000Z" title="发表于 2025-08-29 15:25:11">2025-08-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kdw-2025-%E6%9A%91%E5%81%87%E9%9B%86%E8%AE%AD%E5%86%85%E5%AE%B9/">kdw 2025 暑假集训内容</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-8-29-segtree-merge/#post-comment"><span class="waline-comment-count" data-path="/2025-8-29-segtree-merge/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content"> 实现 123456789int Merge(int u, int v, int l, int r) &#123;    if (!u || !v) return u + v;    int p = ++tot;    if (l == r) return sum[p] = sum[u] + sum[v], p;    int mid = (l + r) &gt;&gt; 1;    ls[p] = Merge(ls[u], ls[v], l, mid);    rs[p] = Merge(rs[u], rs[v], mid + 1, r);    return pushup(p), p;&#125; 其中的加可以换成其他合并操作。  复杂度 复杂度证明是线段树合并的核心。当然你也可以不证明直接瞎猜 一次对于满线段树合并的复杂度是严格的 O(nlog⁡n)O(n \log n)O(nlogn) 的。 但是实际上，这样的情况基本不存在。由于动态开点的存在，有些节点根本就没有建。这个时候，我们发现线段树的节点数量基本上和叶子节点是同一个量级的。而要想一通操作跑到叶子，必然需要两个节点...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-8-16-contest-problem/" title="SDSC2025 模拟赛题目解析与反思">SDSC2025 模拟赛题目解析与反思</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-08-16T09:42:21.000Z" title="发表于 2025-08-16 17:42:21">2025-08-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SDSC2025-%E5%90%88%E9%9B%86/">SDSC2025 合集</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-8-16-contest-problem/#post-comment"><span class="waline-comment-count" data-path="/2025-8-16-contest-problem/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">题目按主观难度排序。  好题  D3T1 方圆  sol 实际上复杂度 O(nlog⁡n)O(n \log n)O(nlogn) 的平衡树好想又好写。 不过有线性的做法，就是把整个序列建树，从上往下递归遍历一遍，然后如果一个节点套了方括号就反着扫，不然就正着扫，遇到括号就往下递归即可。  think  考虑对于一些大问题套小问题的东西建树，然后递归处理。   D1T1 最大公约数  statement  有一个长为 nnn 的序列 aaa，其价值为所有数的最大公约数。可以进行一次操作，选择序列中的一个区间 [l,r][l, r][l,r]，将区间中的每个数字加上给定常数 kkk。也可以不操作。求序列价值最大值。   sol 发现答案一定是前缀的一段 gcd⁡\gcdgcd，后缀的一段 gcd⁡\gcdgcd 和中间一段加上 kkk 的 gcd⁡\gcdgcd。 枚举前缀的 lll 和后缀的 rrr。发现这两个东西最多只有 log⁡V\log VlogV 段，而根据贪心两个端点都选到最远的位置一定是最优的，这样的话只需要 O(log⁡V)O(\log V)O(logV) 枚举 ll...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-7-23-SDSC2025/" title="SDSC2025 游记">SDSC2025 游记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-07-23T12:23:34.000Z" title="发表于 2025-07-23 20:23:34">2025-07-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/SDSC2025-%E5%90%88%E9%9B%86/">SDSC2025 合集</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-7-23-SDSC2025/#post-comment"><span class="waline-comment-count" data-path="/2025-7-23-SDSC2025/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content"> Day 0 高铁 2 小时+出租车 40 分钟。不对今年为啥换食堂了？ 进去发现下铺没了，稍作休整启动 florr，然后发现 lcn 的热点玩得太卡了（我才不会告诉你实际上是因为我那个没有 40 级的账号好玩极了），然后启动 MC（高铁上开了个新存档），玩了一会 lcn 邀请我局域网联机。欸为啥我局域网搜不到你啊？？？哎问题不大，我直接 IP 扫段就找到你了。ymq 进存档直接开搞，两人打的如火如荼。 22:30 大家正在聊天，宿管突然冲进来高声怒骂：  几点了？知道该睡觉了吗？    ↑前人的智慧   Day 1 上午模拟赛，开题 20 分钟糊了个 T1 的 DP 假做法，通过了所有样例（足足 7 个，每个样例 5 组啊……），然后非常自信开 T2。 大约 2 小时的时候 wyj 发送了第 8 个样例，hack 掉了假做法。那咋整？欸有了，虽然这个做法是彻头彻尾假了，但貌似直接倒着扫一遍就能过掉他构造的 hack？那就假设这个做法真了吧（） 经过一通思考发现了 T2 的一些神秘的（与正解毫无关系的）性质，然后瞎搞一通，给一个 O(nn)O(n^n)O(nn) 的暴搜加上一个最...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-7-11-fun-problems/" title="一些有意思的题目">一些有意思的题目</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-07-11T10:08:54.000Z" title="发表于 2025-07-11 18:08:54">2025-07-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kdw-2025-%E6%9A%91%E5%81%87%E9%9B%86%E8%AE%AD%E5%86%85%E5%AE%B9/">kdw 2025 暑假集训内容</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-7-11-fun-problems/#post-comment"><span class="waline-comment-count" data-path="/2025-7-11-fun-problems/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content"> Mathematical Problem 抽象。注意到 n=3n = 3n=3 的时候，169,196,961169, 196, 961169,196,961 符合要求。那么 n=5n = 5n=5 的时候，我们把这些数字都变成 16900,19600,96100,10609,9060116900,19600,96100,10609,9060116900,19600,96100,10609,90601 就好了。 那么往后推也就一样了：要么在后面加上 000，要么在中间加上 000。  超级钢琴 首先考虑如果固定 lll，最大值是可以确定的（前缀和上求 max⁡\maxmax）。 那么，我们肯定要从大到小贪心选择所有的区间（废话）。这样就很容易想到优先队列，问题是有 O(n2)O(n^2)O(n2) 级别的区间数量，直接开显然会炸掉。 那么我们对于一个左端点，先找到一个最大值和可行的区间右端点的范围。每一次取出最大值，再把这个可行范围分成两半即可。  Conveyor ⌈n2⌉\lceil \frac{n}{2} \rceil⌈2n​⌉ 史莱姆会往右走，⌊n2⌋\lfloor \...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-7-11-DP-of-DP/" title="DP套DP">DP套DP</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-07-11T04:01:14.000Z" title="发表于 2025-07-11 12:01:14">2025-07-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kdw-2025-%E6%9A%91%E5%81%87%E9%9B%86%E8%AE%AD%E5%86%85%E5%AE%B9/">kdw 2025 暑假集训内容</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-7-11-DP-of-DP/#post-comment"><span class="waline-comment-count" data-path="/2025-7-11-DP-of-DP/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-7-10-DP-problems/" title="7.10 动态规划题目">7.10 动态规划题目</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-07-10T06:23:58.000Z" title="发表于 2025-07-10 14:23:58">2025-07-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kdw-2025-%E6%9A%91%E5%81%87%E9%9B%86%E8%AE%AD%E5%86%85%E5%AE%B9/">kdw 2025 暑假集训内容</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-7-10-DP-problems/#post-comment"><span class="waline-comment-count" data-path="/2025-7-10-DP-problems/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content"> 计数类问题  CF1657E Star MST 首先，我们发现条件可以变为：图的最小生成树是以 111 为中心的菊花。根据 Kruskal 的性质，很明显对于 222 个节点 uuu 和 vvv，他们之间的边 u→vu \to vu→v 一定要大于 1→u1 \to u1→u 和 1→v1 \to v1→v。 然而这玩意没法按照 1∼n1 \sim n1∼n 的顺序 DP，因为你会发现如果枚举 1→x1 \to x1→x 的边的长度就不能转移，因此整个乱套了。 发现 u→vu \to vu→v 的边长实际上是要大于两点到 111 的边的 max⁡\maxmax。由于 max⁡\maxmax 不好转移，我们考虑能不能把这个 max⁡\maxmax 去掉。那么，如果我们按照边权来进行 DP 的话就好多了。 因此状态出来了：fi,jf_{i,j}fi,j​ 表示最大的边为 iii，总共有 jjj 个点的方案数。 初步写出一个转移： fi,j=fi−1,k×(v−k+1)newedge×perm f_{i, j}=f_{i - 1, k} \times (v - k + 1)^{\te...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-7-8-persistent-segtree/" title="可持久化线段树的应用">可持久化线段树的应用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-07-08T02:03:09.000Z" title="发表于 2025-07-08 10:03:09">2025-07-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kdw-2025-%E6%9A%91%E5%81%87%E9%9B%86%E8%AE%AD%E5%86%85%E5%AE%B9/">kdw 2025 暑假集训内容</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-7-8-persistent-segtree/#post-comment"><span class="waline-comment-count" data-path="/2025-7-8-persistent-segtree/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content"> P2839 middle  题意 给你多个询问，每一个询问有一个左端点和右端点的范围，问所有区间的中位数最大值。  题解 首先考虑单次操作。假如某个数能够成为中位数，那么小于这个数全部设置为 −1-1−1，大于他的全都设成 111，则他们的和一定是 000 或者 111。（奇偶性的问题） 那么这玩意就单调了，然后就可以二分了。每一次都把 111 和 −1-1−1 设置好，然后求和。 但是如果是多次的话，直接这样搞就炸了，因为你的每一次 check 都是 O(nlog⁡2n)O(n \log^2n)O(nlog2n) 的，乘起来就炸了。 我们考虑实际上整个序列的 1/−11/-11/−1 表示最多只有 nnn 种情况，那么可以预处理把这 nnn 种情况都建出来，后面的每一次二分就是 O(log⁡n)O(\log n)O(logn) 了。  Rebrending 考虑对于某一个位置 iii，要求前面的点中 ∣aj−ai∣|a_j - a_i|∣aj​−ai​∣ 的最小值。这显然是个前缀的 max⁡\maxmax，但是问题是这玩意可能会变化很多次，而如果对每个位置都这么扫一遍显然会炸...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-6-22-cartesian-tree/" title="笛卡尔树">笛卡尔树</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-06-22T11:52:33.000Z" title="发表于 2025-06-22 19:52:33">2025-06-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-6-22-cartesian-tree/#post-comment"><span class="waline-comment-count" data-path="/2025-6-22-cartesian-tree/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content"> 算法 笛卡尔树是一种非常简单的 Treap。这是一种静态的平衡树，不支持修改操作，如果给定的序列是有序的，那么可以直接在 O(n)O(n)O(n) 的时间复杂度内完成建树。一般而言，题目中多半会把元素的下标作为 Treap 的排名权值（即满足二叉树性质的那个维度）。 在这种情况下，建笛卡尔树的方法比较巧妙。首先，我们维护一个“右链”，也就是当前的树的最右侧的元素构成的链。此时如果需要新建一个节点，一定会在这条链上。原因很简单，一个二叉查找树的右子树一定比当前节点大，而由于我们是顺序插入的，这个权值一定是最大的。 但是还有堆的性质。也就是说我们应该在这个链上找一个合适位置插入，然后原来这个节点的右子树改为当前节点的左子树。 代码如下： 123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;#include &lt;stack&gt;#define IAKIOI for (int i = 1; i &lt;= n; i++) using namespace std;cons...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025-6-21-FHQ-Treap/" title="FHQ-Treap">FHQ-Treap</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-06-21T13:42:42.000Z" title="发表于 2025-06-21 21:42:42">2025-06-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2025-6-21-FHQ-Treap/#post-comment"><span class="waline-comment-count" data-path="/2025-6-21-FHQ-Treap/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content"> Part 1. 一些对比 FHQ Treap 与 Splay：  FHQ Treap 的代码比 Splay 好写得多。 FHQ Treap 只用到了一些分裂与合并，不会很大的影响到整个树的形态，所以这玩意更容易可持久化。 在一些特殊场合（例如 LCT）只能使用 Splay。  FHQ Treap 与 普通 Treap：  FHQ Treap 不用旋转，更好写。 能支持更多功能。（比如帮助 lhc0707AKIOI）  这么好的东西我们肯定得学啊！  Part 2. 思想 首先，假设你已经学会了普通 Treap。 接下来我们直接看分裂与合并。  更新 当我们改动一个节点的时候，其 siz 会发生变化，所以我们需要先写个这玩意： 1inline void Update(int x)&#123;siz[x]=siz[ls[x]]+siz[rs[x]]+1;&#125;  分裂 对于一个大致长这个样子的平衡树——  （节点中第一个数字表示值，第二个表示优先级） 现在搞点事情：对这个平衡树按照 xxx 分裂成两棵树。分裂操作就是将一个树分成两个，一个都小于 xxx，一个都大于 xxx。（...</div></div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://s21.ax1x.com/2024/08/01/pkXdhVS.md.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Li Yuanzhuo</div><div class="author-info-description">一个菜鸡/蒟蒻</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/liyuanzhuo6811"><i class="fab fa-github"></i><span>我的 Github</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">评论的QQ功能暂时无法使用。</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025-11-16-daily-problem/" title="daily-problem">daily-problem</a><time datetime="2025-11-16T22:58:49.000Z" title="发表于 2025-11-17 06:58:49">2025-11-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025-11-13-tmp-1/" title="无标题">无标题</a><time datetime="2025-11-13T11:13:01.523Z" title="发表于 2025-11-13 19:13:01">2025-11-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025-11-13-tmp-1/" title="无标题">无标题</a><time datetime="2025-11-13T11:12:48.196Z" title="发表于 2025-11-13 19:12:48">2025-11-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025-11-8-daily-problem/" title="2025.11.10-2025.11.14日常题目总结">2025.11.10-2025.11.14日常题目总结</a><time datetime="2025-11-08T15:45:36.000Z" title="发表于 2025-11-08 23:45:36">2025-11-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025-11-3-csp2025/" title="CSP2025游记">CSP2025游记</a><time datetime="2025-11-03T02:32:39.000Z" title="发表于 2025-11-03 10:32:39">2025-11-03</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
          </div>
          <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/2025%E5%B9%B4%E5%9B%BD%E5%BA%86%E9%9B%86%E8%AE%AD/"><span class="card-category-list-name">2025年国庆集训</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/SDSC2025-%E5%90%88%E9%9B%86/"><span class="card-category-list-name">SDSC2025 合集</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/kdw-2025-%E6%9A%91%E5%81%87%E9%9B%86%E8%AE%AD%E5%86%85%E5%AE%B9/"><span class="card-category-list-name">kdw 2025 暑假集训内容</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="card-category-list-name">日常学习笔记</span><span class="card-category-list-count">3</span></a></li>
          </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E6%80%9D%E7%BB%B4%E9%A2%98/" style="font-size: 1.1em; color: #999">思维题</a> <a href="/tags/%E5%9B%BE%E8%AE%BA/" style="font-size: 1.33em; color: #99a2af">图论</a> <a href="/tags/%E6%B8%B8%E5%AF%84/" style="font-size: 1.1em; color: #999">游寄</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size: 1.1em; color: #999">字符串</a> <a href="/tags/%E6%95%B0%E8%AE%BA/" style="font-size: 1.21em; color: #999ea4">数论</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.39em; color: #99a4b4">数据结构</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 1.27em; color: #99a0a9">动态规划</a> <a href="/tags/%E6%80%9D%E7%BB%B4%E9%A2%98%E7%9B%AE/" style="font-size: 1.1em; color: #999">思维题目</a> <a href="/tags/%E9%A2%98%E8%A7%A3/" style="font-size: 1.1em; color: #999">题解</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.27em; color: #99a0a9">数学</a> <a href="/tags/%E6%A8%A1%E6%8B%9F%E6%B5%8B%E8%AF%95/" style="font-size: 1.16em; color: #999b9e">模拟测试</a> <a href="/tags/%E7%BB%83%E4%B9%A0%E9%A2%98/" style="font-size: 1.44em; color: #99a7ba">练习题</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 1.5em; color: #99a9bf">学习笔记</a> <a href="/tags/%E6%B8%B8%E8%AE%B0/" style="font-size: 1.16em; color: #999b9e">游记</a> <a href="/tags/%E6%A0%91%E4%B8%8A%E9%97%AE%E9%A2%98/" style="font-size: 1.1em; color: #999">树上问题</a></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>归档</span>
      <a class="card-more-btn" href="/archives/"
            title="查看更多">
            <i class="fas fa-angle-right"></i>
          </a>
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/11/">
            <span class="card-archive-list-date">
              十一月 2025
            </span>
            <span class="card-archive-list-count">6</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/10/">
            <span class="card-archive-list-date">
              十月 2025
            </span>
            <span class="card-archive-list-count">4</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/09/">
            <span class="card-archive-list-date">
              九月 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/08/">
            <span class="card-archive-list-date">
              八月 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/07/">
            <span class="card-archive-list-date">
              七月 2025
            </span>
            <span class="card-archive-list-count">5</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/06/">
            <span class="card-archive-list-date">
              六月 2025
            </span>
            <span class="card-archive-list-count">3</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/03/">
            <span class="card-archive-list-date">
              三月 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/02/">
            <span class="card-archive-list-date">
              二月 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站信息</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">36</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总浏览量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-11-17T07:29:35.029Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By Li Yuanzhuo</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  async function loadWaline () {
    try {
      const eleGroup = document.querySelectorAll('#recent-posts .waline-comment-count')
      const keyArray = Array.from(eleGroup).map(i => i.getAttribute('data-path'))

      const res = await fetch(`https://waline.snowflavour.cn/.netlify/functions/comment/api/comment?type=count&url=${keyArray}`, { method: 'GET' })
      const result = await res.json()
      
      result.data.forEach((count, index) => {
        eleGroup[index].textContent = count
      })
    } catch (err) {
      console.error(err)
    }
  }

  window.pjax ? loadWaline() : window.addEventListener('load', loadWaline)
})()</script><script src="https://unpkg.com/typed.js/dist/typed.umd.js"></script><script>window.typedJSFn = {
  init: str => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: subtitleType => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        btf.getScript('https://unpkg.com/typed.js/dist/typed.umd.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  },
  processSubtitle: (content, extraContents = []) => {
    if (true) {
      const sub = [].slice()

      if (extraContents.length > 0) {
        sub.unshift(...extraContents)
      }

      if (typeof content === 'string') {
        sub.unshift(content)
      } else if (Array.isArray(content)) {
        sub.unshift(...content)
      }

      sub.length > 0 && typedJSFn.init(sub)
    } else {
      document.getElementById('subtitle').textContent = typeof content === 'string' ? content :
        (Array.isArray(content) && content.length > 0 ? content[0] : '')
    }
  }
}
btf.addGlobalFn('pjaxSendOnce', () => { typed.destroy() }, 'typedDestroy')
</script><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      console.log(data.from)
      const from = '出自 ' + data.from
      typedJSFn.processSubtitle(data.hitokoto, [from])
    })
    .catch(err => {
      console.error('Failed to get the Hitokoto API:', err)
      typedJSFn.processSubtitle([])
    })
}
typedJSFn.run(subtitleType)
</script></div><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script><canvas id="snow"></canvas><script async src="/js/snow.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.39.0/min/vs/loader.min.js"></script><link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.39.0/min/vs/editor/editor.main.min.css"><script src="/js/funeditor.js"></script><script id="click-heart" src="https://unpkg.com/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>